# AOS v2.0.8

## Installation

```shell
npm i -g https://get_ao.g8way.io
```

## Overview

This release introduces SDK mode for headless execution, enhances the token blueprint with hyperbeam state-cache support, and includes updates to core dependencies.

## SDK Mode

You can now run AOS in headless mode using the `--run` flag, enabling non-interactive execution of Lua code. This is useful for scripting, automation, and integrating AOS into build pipelines.

```shell
aos {process-id} --run "1 + 1"
```

The command evaluates the Lua expression, prints the result, and exits without entering the interactive shell. The splash banner is suppressed for cleaner output.

### Using with Hyper AOS

Combine `--run` with the `--hyper` flag to target hyper-aos directly without being prompted:

```shell
aos {process-id} --hyper --run "return Balance"
```

This mode provides a streamlined way to query process state or execute commands programmatically.

## Token Blueprint Updates

The token blueprint now includes hyperbeam state-cache support through automatic state patch messages. When balance changes occur (via `Transfer` or `Mint` actions), the process sends patch messages to update the base state:

```lua
-- Automatically sent after transfers
local patchMsg = {
  device = "patch@1.0",
  balances = {
    [msg.Recipient] = Balances[msg.Recipient],
    [msg.From] = Balances[msg.From]
  }
}
Send(patchMsg)
```

This enables efficient state caching and synchronization for processes using the hyperbeam infrastructure.

### Token Info Standardization

The `Info` handler now uses lowercase field names and returns `Supply` instead of `Total-Supply` for consistency:

```lua
-- Previous format
{ "Total-Supply": "1000000" }

-- New format
{ "supply": "1000000" }
```

## APM Package Update

The APM (AO Package Manager) process ID has been updated to the latest version, ensuring access to the most recent package registry and improved package management capabilities.

## Hyper AOS Deduplication

Hyper AOS now includes built-in deduplication support, preventing redundant message processing and improving performance for high-throughput processes.

---

For more information, visit the [AOS documentation](https://cookbook_ao.g8way.io) or report issues on [GitHub](https://github.com/permaweb/aos/issues).
